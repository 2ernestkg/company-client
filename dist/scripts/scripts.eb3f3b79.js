"use strict";function notifyError(a){500===a.status?alert("Could not update, error on server!"):400===a.status?alert("Data format is wrong"):404===a.status?alert("This record is doest not exist on server!"):409===a.status&&alert("Could not update as there is contraint violation")}angular.module("projectsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/company.html",controller:"CompanyCtrl",controllerAs:"company"}).when("/view/:id",{templateUrl:"views/company-detail.html",controller:"CompanyDetailCtrl"}).when("/edit/:id",{templateUrl:"views/company-edit.html",controller:"CompanyEditCtrl"}).when("/new",{templateUrl:"views/company-new.html",controller:"CompanyNewCtrl"}).otherwise({redirectTo:"/"})}]);var app=angular.module("projectsApp");app.controller("CompanyCtrl",["$scope","Company",function(a,b){a.companies=b.query()}]),app.controller("CompanyDetailCtrl",["$scope","$routeParams","Company","AddOwner",function(a,b,c,d){a.company=c.get({id:b.id}),a.owner={},a.addOwner=function(b){a.company=d.add({id:a.company.id},b,function(b){a.company=b},function(a){notifyError(a)})}}]),app.controller("CompanyEditCtrl",["$scope","$routeParams","$location","Company",function(a,b,c,d){a.company=d.get({id:b.id}),a.newOwner={},a.$watch("company.email",function(b,c){""===b&&(a.company.email=void 0)}),a.$watch("company.phone_number",function(b,c){""===b&&(a.company.phone_number=void 0)}),a.addOwner=function(b){a.company.owners.push(b),a.newOwner={}},a.delOwner=function(b){a.company.owners.splice(b,1)},a.updateCompany=function(){a.company=d.update({id:a.company.id},a.company,function(a){c.path("#/")},function(a){notifyError(a)})}}]),app.controller("CompanyNewCtrl",["$scope","$location","Company",function(a,b,c){a.company={},a.company.owners=[],a.newOwner={},a.$watch("company.email",function(b,c){""===b&&(a.company.email=void 0)}),a.$watch("company.phone_number",function(b,c){""===b&&(a.company.phone_number=void 0)}),a.addOwner=function(b){a.company.owners.push(b),a.newOwner={}},a.delOwner=function(b){a.company.owners.splice(b,1)},a.saveCompany=function(){a.company=c.save({},a.company,function(c){a.company={},a.company.owners=[],a.newOwner={},b.path("#/")},function(a){notifyError(a)})}}]);var COMPANY_REST_URL="https://company-api-testapp.herokuapp.com";angular.module("projectsApp").factory("Company",["$resource",function(a){return a(COMPANY_REST_URL+"/company/:id",{},{query:{method:"GET",params:{id:""},isArray:!0},update:{method:"PUT"},save:{method:"POST"}})}]).factory("AddOwner",["$resource",function(a){return a(COMPANY_REST_URL+"/company/:id/owner",{},{add:{method:"PUT"}})}]),angular.module("projectsApp").run(["$templateCache",function(a){a.put("views/company-detail.html",'<ul class="nav navbar-nav navbar-right"> <li><a href="#/">List</a></li> <li><a href="#/edit/{{company.id}}" class="btn btn-primary">Edit</a></li> </ul> <div class="row"> {{ company.name }} <address> {{ company.address }}<br> {{ company.city }}, {{ company.country }}<br> <div ng-if="company.phone_number"><abbr title="Phone">P:</abbr> {{ company.phone_number }}<br></div> <a href="mailto:#">{{ company.email }}</a> </address> Owners:<br> <div id="Add Owner"> <form role="ownerForm"> <div class="input-group"> <input name="owner.name" data-ng-model="owner.name" type="text" class="form-control" placeholder="Owner Name"> <span class="input-group-btn"> <button class="btn btn-default" type="button" ng-click="addOwner(owner)">Add</button> </span> </div> </form> </div> <div ng-repeat="owner in company.owners" class="col-xs-6 col-md-3"> {{ owner.name }} </div> </div>'),a.put("views/company-edit.html",'<form class="form-horizontal" role="form" ng-submit="updateCompany()"> <div ng-include="\'views/company-form.html\'"></div> </form>'),a.put("views/company-form.html",'<form role="form" name="companyForm" class="form-horizontal"> <div class="row"> <div class="form-group" ng-class="{error: companyForm.name.$invalid}"> <label class="col-md-2"> Name </label> <div class="col-md-4"> <input name="name" data-ng-model="company.name" type="text" class="form-control" required> <span ng-show="companyForm.name.$dirty && companyForm.name.$invalid" class="help-inline">Name Required</span> </div> </div> <div class="form-group" ng-class="{error: companyForm.address.$invalid}"> <label class="col-md-2"> Address </label> <div class="col-md-4"> <input name="address" data-ng-model="company.address" type="text" class="form-control" required> <span ng-show="companyForm.address.$dirty && companyForm.address.$invalid" class="help-inline">Address Required</span> </div> </div> <div class="form-group" ng-class="{error: companyForm.city.$invalid}"> <label class="col-md-2"> City </label> <div class="col-md-4"> <input name="city" data-ng-model="company.city" type="text" class="form-control" required> <span ng-show="companyForm.city.$dirty && companyForm.city.$invalid" class="help-inline">City Required</span> </div> </div> <div class="form-group" ng-class="{error: companyForm.country.$invalid}"> <label class="col-md-2"> Country </label> <div class="col-md-4"> <input name="country" data-ng-model="company.country" type="text" class="form-control" required> <span ng-show="companyForm.country.$dirty && companyForm.country.$invalid" class="help-inline">Country Required</span> </div> </div> <div class="form-group"> <label class="col-md-2"> Phone Number </label> <div class="col-md-4"> <input name="phone_number" data-ng-model="company.phone_number" type="text" class="form-control"> </div> </div> <div class="form-group"> <label class="col-md-2"> Email </label> <div class="col-md-4"> <input name="email" data-ng-model="company.email" type="text" class="form-control"> </div> </div> <div id="Add Owner"> <div class="input-group"> <input name="owner.name" data-ng-model="newOwner.name" type="text" class="form-control" placeholder="Owner Name"> <span class="input-group-btn"> <button class="btn btn-default" type="button" ng-click="addOwner(newOwner)">Add</button> </span> </div> </div> <div id="owners"> <ul class="list-unstyled"> <li ng-repeat="owner in company.owners"> {{ owner.name }} <a class="glyphicon glyphicon-trash" ng-click="delOwner($index)"></a> </li> </ul> </div> <div class="form-group"> <label class="col-md-2"></label> <div class="col-md-4"> <a href="#/" class="btn">Cancel</a> <input type="submit" class="btn btn-primary" ng-disabled="companyForm.$invalid" value="Save"> </div> </div> </div> </form>'),a.put("views/company-new.html",'<form class="form-horizontal" role="form" ng-submit="saveCompany()"> <div ng-include="\'views/company-form.html\'"></div> </form>'),a.put("views/company.html",'<div class="btn-group" role="group" aria-label="..."> <a href="#/new" class="btn btn-link">Add</a> </div> <table class="table table-striped"> <thead> <td>#</td> <td>Name</td> <td>Address</td> <td>Contact Details</td> <td>Owners</td> </thead> <tbody> <tr ng-repeat="company in companies"> <td>{{ company.id }}</td> <td><a href="#/view/{{company.id}}" class="thumb"><strong>{{ company.name }}</strong></a></td> <td> <address> {{ company.address }}<br> {{ company.city }}, {{ company.country }}<br> </address> </td> <td> <address> <div ng-if="company.phone_number"><abbr title="Phone">P:</abbr> {{ company.phone_number }}<br></div> <a href="mailto:#">{{ company.email }}</a> </address><br></td> <td> <ul class="list-unstyled"> <li ng-repeat="owner in company.owners"> {{ owner.name }} </li> </ul> </td> </tr> </tbody> </table>')}]);